# Gitæäº¤å’ŒæœåŠ¡å™¨éƒ¨ç½²å®Œæ•´æµç¨‹

## âš ï¸ é‡è¦è¯´æ˜

### æ•°æ®å®‰å…¨ä¿è¯
- âœ… è¯„åˆ†æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨çš„ `rating_data/ratings.json`
- âœ… è¯¥æ–‡ä»¶å·²åœ¨ `.gitignore` ä¸­æ’é™¤ï¼Œä¸ä¼šè¢«ä¸Šä¼ åˆ°GitHub
- âœ… ä»£ç æ›´æ–°**ä¸ä¼šå½±å“**ç°æœ‰è¯„åˆ†æ•°æ®
- âœ… åªæ›´æ–°ä»£ç é€»è¾‘ï¼Œä¸ä¿®æ”¹æ•°æ®æ–‡ä»¶

### æœ¬æ¬¡ä¿®å¤å†…å®¹
- ä¿®å¤CSVå¯¼å‡ºæ—¶é‡åˆ°Noneå€¼çš„é”™è¯¯
- ç¡®ä¿æ‰€æœ‰å­—æ®µéƒ½æ­£ç¡®è½¬æ¢ä¸ºå­—ç¬¦ä¸²

---

## ç¬¬ä¸€æ­¥ï¼šæäº¤åˆ°GitHub

### 1. æ£€æŸ¥ä¿®æ”¹å†…å®¹
```bash
git status
```

åº”è¯¥çœ‹åˆ°ï¼š
- modified: rating_app.py
- modified: GITæäº¤æŒ‡å—.md
- modified: ä¿®å¤è¯´æ˜.md
- modified: upload_rating_fix.bat

### 2. æ·»åŠ ä¿®æ”¹
```bash
git add rating_app.py GITæäº¤æŒ‡å—.md ä¿®å¤è¯´æ˜.md upload_rating_fix.bat æäº¤å’Œéƒ¨ç½²æµç¨‹.md
```

### 3. æäº¤
```bash
git commit -m "ä¿®å¤CSVå¯¼å‡ºNoneå€¼é”™è¯¯"
```

### 4. æ¨é€åˆ°GitHub
```bash
git push origin main
```

---

## ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²åˆ°æœåŠ¡å™¨

### æ–¹æ³•Aï¼šä»GitHubæ‹‰å–ï¼ˆæ¨èï¼‰

```bash
# 1. SSHåˆ°æœåŠ¡å™¨
ssh root@blitzepanda.top

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/review-result-viewer

# 3. å¤‡ä»½å½“å‰è¯„åˆ†æ•°æ®ï¼ˆå¯é€‰ä½†æ¨èï¼‰
cp rating_data/ratings.json rating_data/ratings.backup.$(date +%Y%m%d_%H%M%S).json

# 4. ä»GitHubæ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 5. é‡å¯æœåŠ¡
systemctl restart rating

# 6. æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status rating

# 7. éªŒè¯ä¿®å¤
curl http://127.0.0.1:8001/api/rating/export
```

### æ–¹æ³•Bï¼šç›´æ¥ä¸Šä¼ æ–‡ä»¶

```bash
# 1. ä¸Šä¼ ä¿®å¤åçš„ä»£ç 
scp rating_app.py root@blitzepanda.top:/opt/review-result-viewer/

# 2. é‡å¯æœåŠ¡
ssh root@blitzepanda.top "systemctl restart rating"
```

### æ–¹æ³•Cï¼šä½¿ç”¨ä¸€é”®è„šæœ¬

```bash
upload_rating_fix.bat
```

---

## ç¬¬ä¸‰æ­¥ï¼šéªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
ssh root@blitzepanda.top "systemctl status rating"
```

åº”è¯¥æ˜¾ç¤ºï¼š`Active: active (running)`

### 2. æµ‹è¯•å¯¼å‡ºåŠŸèƒ½
1. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://blitzepanda.top/rating
2. ç‚¹å‡»å³ä¸Šè§’"ğŸ“¥ å¯¼å‡º"æŒ‰é’®
3. åº”è¯¥èƒ½æˆåŠŸä¸‹è½½CSVæ–‡ä»¶

### 3. æ£€æŸ¥è¯„åˆ†æ•°æ®å®Œæ•´æ€§
```bash
# æŸ¥çœ‹è¯„åˆ†æ•°æ®æ–‡ä»¶
ssh root@blitzepanda.top "wc -l /opt/review-result-viewer/rating_data/ratings.json"

# åº”è¯¥æ˜¾ç¤ºè¡Œæ•°ï¼Œç¡®è®¤æ•°æ®è¿˜åœ¨
```

---

## å¸¸è§é—®é¢˜

### Q1: Git pushå¤±è´¥
**è§£å†³**ï¼š
```bash
git pull origin main
git push origin main
```

### Q2: æœåŠ¡å™¨git pullå¤±è´¥
**åŸå› **ï¼šæœåŠ¡å™¨ä¸Šæœ‰æœ¬åœ°ä¿®æ”¹

**è§£å†³**ï¼š
```bash
# æŸ¥çœ‹ä¿®æ”¹
git status

# å¦‚æœåªæ˜¯ratings.jsonï¼Œå¯ä»¥å¿½ç•¥ï¼ˆå®ƒåœ¨.gitignoreä¸­ï¼‰
git stash
git pull origin main
```

### Q3: æœåŠ¡é‡å¯åè¯„åˆ†æ•°æ®ä¸¢å¤±
**ä¸ä¼šå‘ç”Ÿ**ï¼šè¯„åˆ†æ•°æ®åœ¨ç‹¬ç«‹çš„JSONæ–‡ä»¶ä¸­ï¼Œé‡å¯æœåŠ¡ä¸ä¼šå½±å“

**å¦‚æœçœŸçš„ä¸¢å¤±**ï¼š
```bash
# æ¢å¤å¤‡ä»½
cd /opt/review-result-viewer/rating_data
ls -la ratings.backup.*
cp ratings.backup.YYYYMMDD_HHMMSS.json ratings.json
systemctl restart rating
```

---

## éƒ¨ç½²æ£€æŸ¥æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œè¯·éªŒè¯ï¼š

- [ ] GitHubä¸Šä»£ç å·²æ›´æ–°
- [ ] æœåŠ¡å™¨ä»£ç å·²æ‹‰å–æœ€æ–°ç‰ˆæœ¬
- [ ] æœåŠ¡è¿è¡Œæ­£å¸¸ï¼š`systemctl status rating`
- [ ] é¡µé¢å¯ä»¥è®¿é—®ï¼šhttp://blitzepanda.top/rating
- [ ] å¯¼å‡ºåŠŸèƒ½æ­£å¸¸ï¼šç‚¹å‡»å¯¼å‡ºæŒ‰é’®èƒ½ä¸‹è½½CSV
- [ ] è¯„åˆ†æ•°æ®å®Œæ•´ï¼šå·²æœ‰çš„è¯„åˆ†éƒ½è¿˜åœ¨
- [ ] æ–°è¯„åˆ†å¯ä»¥ä¿å­˜ï¼šæµ‹è¯•è¯„çº§ä¸€ä¸ªé—¨åº—

---

## æ•°æ®å¤‡ä»½å»ºè®®

### å®šæœŸå¤‡ä»½è¯„åˆ†æ•°æ®
```bash
# ä»æœåŠ¡å™¨ä¸‹è½½åˆ°æœ¬åœ°
scp root@blitzepanda.top:/opt/review-result-viewer/rating_data/ratings.json ./backup/ratings_$(date +%Y%m%d).json
```

### åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®è‡ªåŠ¨å¤‡ä»½
```bash
# æ·»åŠ åˆ°crontabï¼ˆæ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½ï¼‰
ssh root@blitzepanda.top
crontab -e

# æ·»åŠ è¿™ä¸€è¡Œï¼š
0 2 * * * cp /opt/review-result-viewer/rating_data/ratings.json /opt/review-result-viewer/rating_data/ratings.backup.$(date +\%Y\%m\%d).json
```

---

## æ€»ç»“

1. **æäº¤åˆ°GitHub**ï¼š`git add . && git commit -m "ä¿®å¤CSVå¯¼å‡ºNoneå€¼é”™è¯¯" && git push`
2. **éƒ¨ç½²åˆ°æœåŠ¡å™¨**ï¼š`ssh root@blitzepanda.top "cd /opt/review-result-viewer && git pull && systemctl restart rating"`
3. **éªŒè¯åŠŸèƒ½**ï¼šè®¿é—®é¡µé¢æµ‹è¯•å¯¼å‡ºåŠŸèƒ½

**æ•°æ®å®‰å…¨**ï¼šè¯„åˆ†æ•°æ®å®Œå…¨ä¸å—å½±å“ï¼Œå¯ä»¥æ”¾å¿ƒéƒ¨ç½²ï¼
