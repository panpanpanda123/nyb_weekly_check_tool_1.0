# å®¡æ ¸ç»“æœå±•ç¤ºç³»ç»Ÿ - éƒ¨ç½²è¯´æ˜

## ä¸€ã€æœåŠ¡å™¨ä¿¡æ¯

- **æœåŠ¡å™¨IP**: 172.22.181.185
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 22.04.5 LTS âœ…
- **GitHubä»“åº“**: https://github.com/panpanpanda123/nyb_weekly_check_tool_1.0.git

## äºŒã€å¿«é€Ÿéƒ¨ç½²ï¼ˆå¤åˆ¶ç²˜è´´å³å¯ï¼‰

### æ­¥éª¤1: æœ¬åœ°æ¨é€ä»£ç 

åœ¨ä½ çš„**æœ¬åœ°ç”µè„‘**ä¸Šè¿è¡Œï¼š

```bash
# ç¡®ä¿æ‰€æœ‰æ–‡ä»¶å·²æäº¤
git add .
git commit -m "å‡†å¤‡éƒ¨ç½²åˆ°æœåŠ¡å™¨"
git push origin main
```

### æ­¥éª¤2: ç™»å½•æœåŠ¡å™¨å¹¶å®‰è£…

**å·²ç»ç™»å½•æœåŠ¡å™¨äº†ï¼Œç›´æ¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š**

```bash
# 1. ä¸‹è½½å®‰è£…è„šæœ¬
cd ~
wget https://raw.githubusercontent.com/panpanpanda123/nyb_weekly_check_tool_1.0/main/deploy/install.sh

# 2. ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x install.sh

# 3. è¿è¡Œå®‰è£…è„šæœ¬
bash install.sh
```

**å½“æç¤ºè¾“å…¥ GitHub ä»“åº“ URL æ—¶ï¼Œè¾“å…¥ï¼š**
```
https://github.com/panpanpanda123/nyb_weekly_check_tool_1.0.git
```

**å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼ˆçº¦5-10åˆ†é’Ÿï¼‰ï¼š**
- âœ… æ›´æ–°ç³»ç»ŸåŒ…
- âœ… å®‰è£… Python 3.10ã€PostgreSQLã€Nginx
- âœ… åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·ï¼ˆå¯†ç è‡ªåŠ¨ç”Ÿæˆï¼‰
- âœ… ä» GitHub å…‹éš†ä»£ç 
- âœ… å®‰è£… Python ä¾èµ–
- âœ… é…ç½® Nginx åå‘ä»£ç†
- âœ… é…ç½®ç³»ç»ŸæœåŠ¡è‡ªå¯åŠ¨
- âœ… å¯åŠ¨æœåŠ¡

### æ­¥éª¤3: è®¿é—®ç³»ç»Ÿ

å®‰è£…å®Œæˆåï¼Œåœ¨æµè§ˆå™¨è®¿é—®ï¼š
```
http://172.22.181.185
```

**å¦‚æœæ— æ³•è®¿é—®ï¼Œéœ€è¦åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°å¼€æ”¾80ç«¯å£ï¼š**
1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
2. è¿›å…¥ ECS å®ä¾‹ç®¡ç†
3. ç‚¹å‡»"å®‰å…¨ç»„" â†’ "é…ç½®è§„åˆ™"
4. æ·»åŠ å…¥æ–¹å‘è§„åˆ™ï¼šç«¯å£ 80ï¼Œæˆæƒå¯¹è±¡ 0.0.0.0/0

## ä¸‰ã€ä½¿ç”¨è¯´æ˜

### æ•°æ®ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰

1. **è®¿é—®ç®¡ç†é¡µé¢**
   ```
   http://172.22.181.185/admin/upload
   ```

2. **ä¸Šä¼ ç™½åå•**
   - ç‚¹å‡»"é€‰æ‹©ç™½åå•æ–‡ä»¶"
   - é€‰æ‹© `.xlsx` æ ¼å¼çš„ç™½åå•æ–‡ä»¶ï¼ˆæ£€æŸ¥é¡¹è®°å½•.xlsxï¼‰
   - ç‚¹å‡»"ä¸Šä¼ ç™½åå•"
   - ç­‰å¾…å¯¼å…¥å®Œæˆï¼Œä¼šæ˜¾ç¤ºå¯¼å…¥çš„è®°å½•æ•°

3. **ä¸Šä¼ å®¡æ ¸ç»“æœ**
   - ç‚¹å‡»"é€‰æ‹©å®¡æ ¸ç»“æœæ–‡ä»¶"
   - é€‰æ‹© `.csv` æ ¼å¼çš„å®¡æ ¸ç»“æœæ–‡ä»¶ï¼ˆä»æœ¬åœ°å®¡æ ¸ç³»ç»Ÿå¯¼å‡ºï¼‰
   - ç‚¹å‡»"ä¸Šä¼ å®¡æ ¸ç»“æœ"
   - ç­‰å¾…å¯¼å…¥å®Œæˆï¼Œä¼šæ˜¾ç¤ºå¯¼å…¥çš„è®°å½•æ•°

### æŸ¥çœ‹å®¡æ ¸ç»“æœï¼ˆå¤–éƒ¨åŒäº‹ï¼‰

1. **è®¿é—®å±•ç¤ºé¡µé¢**
   ```
   http://172.22.181.185
   ```

2. **ç­›é€‰æŸ¥è¯¢**
   - é€‰æ‹©æˆ˜åŒºï¼ˆå¯é€‰ï¼‰
   - é€‰æ‹©çœä»½ï¼ˆå¯é€‰ï¼‰
   - é€‰æ‹©åŸå¸‚ï¼ˆå¯é€‰ï¼‰
   - é€‰æ‹©é—¨åº—æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰
   - é€‰æ‹©æ˜¯å¦åˆæ ¼ï¼ˆå¯é€‰ï¼‰
   - ç‚¹å‡»"æœç´¢"æŒ‰é’®

3. **æŸ¥çœ‹ç»“æœ**
   - æŸ¥çœ‹æ£€æŸ¥é¡¹åˆ—è¡¨
   - ç‚¹å‡»å›¾ç‰‡å¯æ”¾å¤§æŸ¥çœ‹
   - ä¸åˆæ ¼é¡¹ä¼šä»¥çº¢è‰²æ˜¾ç¤º

## å››ã€æ—¥å¸¸ç»´æŠ¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
sudo systemctl status review-viewer
```

### æŸ¥çœ‹å®æ—¶æ—¥å¿—
```bash
sudo journalctl -u review-viewer -f
```

### é‡å¯æœåŠ¡
```bash
sudo systemctl restart review-viewer
```

### æ›´æ–°ä»£ç 
```bash
# åœ¨æœ¬åœ°æ¨é€æ–°ä»£ç åˆ° GitHub
git push origin main

# åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œæ›´æ–°è„šæœ¬
cd /opt/review-result-viewer
sudo bash deploy/update.sh
```

## äº”ã€æ•°æ®åº“ä¿¡æ¯

å®‰è£…å®Œæˆåï¼Œæ•°æ®åº“å‡­æ®ä¿å­˜åœ¨ï¼š
```
/root/.review_viewer_db_credentials
```

æŸ¥çœ‹æ•°æ®åº“ä¿¡æ¯ï¼š
```bash
cat /root/.review_viewer_db_credentials
```

## å…­ã€æ•…éšœæ’æŸ¥

### æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
sudo journalctl -u review-viewer -n 100

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
sudo -u postgres psql -l
```

### æ— æ³•è®¿é—®ç½‘ç«™
```bash
# æ£€æŸ¥ Nginx çŠ¶æ€
sudo systemctl status nginx

# æ£€æŸ¥ Nginx é…ç½®
sudo nginx -t

# é‡å¯ Nginx
sudo systemctl restart nginx
```

### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥ PostgreSQL çŠ¶æ€
sudo systemctl status postgresql

# é‡å¯ PostgreSQL
sudo systemctl restart postgresql
```

## ä¸ƒã€å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **
   - æ•°æ®åº“å¯†ç å·²è‡ªåŠ¨ç”Ÿæˆï¼ˆä¿å­˜åœ¨å‡­æ®æ–‡ä»¶ä¸­ï¼‰

2. **é…ç½®é˜²ç«å¢™**
   ```bash
   sudo ufw allow 80/tcp
   sudo ufw allow 22/tcp
   sudo ufw enable
   ```

3. **é…ç½® HTTPSï¼ˆå¯é€‰ï¼‰**
   ```bash
   # å®‰è£… Certbot
   sudo apt install certbot python3-certbot-nginx
   
   # è·å– SSL è¯ä¹¦
   sudo certbot --nginx -d your-domain.com
   ```

## å…«ã€è”ç³»æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- ç³»ç»Ÿæ—¥å¿—: `sudo journalctl -u review-viewer -f`
- Nginx æ—¥å¿—: `/var/log/nginx/error.log`
- åº”ç”¨æ—¥å¿—: åœ¨ç³»ç»Ÿæ—¥å¿—ä¸­æŸ¥çœ‹

---

**éƒ¨ç½²å®Œæˆï¼** ğŸ‰
