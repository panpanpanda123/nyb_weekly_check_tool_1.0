# 需求文档

## 简介

门店检查项图片审核系统是一个基于局域网的Web应用程序，用于展示和审核门店检查项的标准图片。系统从Excel文件中读取门店检查数据，将图片链接转换为可视化图片，允许审核人员对每张图片进行合格/不合格判断，并将审核结果导出为CSV文件。

## 术语表

- **系统**: 门店检查项图片审核系统
- **审核人员**: 使用系统对门店检查项图片进行审核的用户
- **检查项**: 需要审核的门店检查内容，包含门店信息和标准图片
- **标准图**: 用于展示门店检查项标准的图片URL
- **审核结果**: 审核人员对图片的判断（合格✓或不合格✗）
- **局域网服务**: 在本地网络中运行的Web服务器，允许多个客户端访问
- **白名单文件**: 包含门店运营人员分配信息的Excel文件，每天自动更新
- **省市运营**: 负责门店日常运营管理的主要人员
- **临时运营**: 临时负责门店运营的人员，优先级高于省市运营
- **门店ID**: 门店的唯一标识符，用于关联检查项和运营人员信息

## 需求

### 需求 1

**用户故事:** 作为系统管理员，我想要启动一个局域网Web服务，以便其他设备可以访问审核界面。

#### 验收标准

1. WHEN 系统管理员启动应用程序 THEN 系统 SHALL 在指定端口上启动HTTP服务器
2. WHEN HTTP服务器启动成功 THEN 系统 SHALL 显示可访问的局域网IP地址和端口号
3. WHEN 局域网内的设备访问该地址 THEN 系统 SHALL 返回审核界面的HTML页面
4. WHEN 系统管理员停止应用程序 THEN 系统 SHALL 优雅地关闭HTTP服务器并释放端口

### 需求 2

**用户故事:** 作为系统，我想要读取Excel文件中的检查项数据，以便为审核人员提供完整的检查信息。

#### 验收标准

1. WHEN 系统启动时 THEN 系统 SHALL 读取指定路径的Excel文件
2. WHEN 读取Excel文件时 THEN 系统 SHALL 提取检查项名称、门店名称、门店编号、所属区域和标准图URL字段
3. WHEN Excel文件不存在或无法读取 THEN 系统 SHALL 显示错误信息并提示用户检查文件路径
4. WHEN Excel文件格式不正确或缺少必需字段 THEN 系统 SHALL 显示具体的错误信息
5. WHEN 成功读取数据后 THEN 系统 SHALL 将数据存储在内存中供后续使用

### 需求 3

**用户故事:** 作为审核人员，我想要在独立窗口中查看检查项的详细信息和图片，以便进行准确的审核。

#### 验收标准

1. WHEN 审核人员访问审核界面 THEN 系统 SHALL 显示所有检查项的列表
2. WHEN 显示检查项时 THEN 系统 SHALL 展示门店名称、门店编号、所属区域和检查项名称
3. WHEN 显示标准图时 THEN 系统 SHALL 将图片URL转换为可显示的图片元素
4. WHEN 图片URL无效或无法加载 THEN 系统 SHALL 显示占位符图片或错误提示
5. WHEN 审核界面加载时 THEN 系统 SHALL 按门店编号或检查项顺序组织显示内容

### 需求 4

**用户故事:** 作为审核人员，我想要对每张标准图进行合格/不合格判断，以便记录审核结果。

#### 验收标准

1. WHEN 显示标准图时 THEN 系统 SHALL 在图片下方显示合格（✓）和不合格（✗）两个按钮
2. WHEN 审核人员点击合格按钮 THEN 系统 SHALL 标记该检查项为合格状态并提供视觉反馈
3. WHEN 审核人员点击不合格按钮 THEN 系统 SHALL 标记该检查项为不合格状态并提供视觉反馈
4. WHEN 审核人员更改已有的审核结果 THEN 系统 SHALL 更新该检查项的状态
5. WHEN 审核状态改变时 THEN 系统 SHALL 立即将结果保存到内存中

### 需求 5

**用户故事:** 作为系统，我想要将审核结果与门店信息关联存储，以便生成完整的审核报告。

#### 验收标准

1. WHEN 审核人员提交审核结果 THEN 系统 SHALL 将审核结果与门店编号关联存储
2. WHEN 存储审核结果时 THEN 系统 SHALL 包含门店名称、门店编号、所属区域、检查项名称、标准图URL和审核结果字段
3. WHEN 存储审核结果时 THEN 系统 SHALL 记录审核时间戳
4. WHEN 多个审核人员同时审核不同检查项 THEN 系统 SHALL 正确处理并发的审核结果提交
5. WHEN 审核结果已存在时 THEN 系统 SHALL 更新现有记录而不是创建重复记录

### 需求 6

**用户故事:** 作为审核人员，我想要将审核结果导出为CSV文件，以便进行后续分析和存档。

#### 验收标准

1. WHEN 审核人员点击导出按钮 THEN 系统 SHALL 生成包含所有审核结果的CSV文件
2. WHEN 生成CSV文件时 THEN 系统 SHALL 包含门店名称、门店编号、所属区域、检查项名称、标准图URL、审核结果和审核时间列
3. WHEN CSV文件生成成功 THEN 系统 SHALL 触发浏览器下载该文件
4. WHEN 没有任何审核结果时 THEN 系统 SHALL 提示用户无可导出数据
5. WHEN 导出CSV文件时 THEN 系统 SHALL 使用UTF-8编码以正确显示中文字符

### 需求 7

**用户故事:** 作为审核人员，我想要界面简洁直观，以便快速完成大量检查项的审核工作。

#### 验收标准

1. WHEN 审核界面加载时 THEN 系统 SHALL 使用响应式布局适配不同屏幕尺寸
2. WHEN 显示检查项时 THEN 系统 SHALL 使用卡片式布局清晰展示每个检查项
3. WHEN 图片加载时 THEN 系统 SHALL 显示加载指示器
4. WHEN 审核人员滚动页面时 THEN 系统 SHALL 保持流畅的滚动体验
5. WHEN 审核状态改变时 THEN 系统 SHALL 通过颜色或图标变化提供即时视觉反馈

### 需求 8

**用户故事:** 作为系统，我想要读取白名单文件并关联运营人员信息，以便为每个门店分配负责人。

#### 验收标准

1. WHEN 系统启动时 THEN 系统 SHALL 读取白名单Excel文件（whitelist.xlsx）
2. WHEN 读取白名单文件时 THEN 系统 SHALL 提取门店ID、省市运营和临时运营字段
3. WHEN 关联门店信息时 THEN 系统 SHALL 通过门店编号匹配白名单中的门店ID
4. WHEN 门店有临时运营人员 THEN 系统 SHALL 将该门店分配给临时运营人员
5. WHEN 门店没有临时运营人员 THEN 系统 SHALL 将该门店分配给省市运营人员
6. WHEN 白名单文件不存在或无法读取 THEN 系统 SHALL 显示警告但继续运行，所有门店显示为"未分配"

### 需求 9

**用户故事:** 作为审核人员，我想要按运营人员筛选门店检查项，以便只查看自己负责的门店。

#### 验收标准

1. WHEN 审核界面加载时 THEN 系统 SHALL 在页面顶部显示运营人员筛选下拉框
2. WHEN 筛选下拉框显示时 THEN 系统 SHALL 列出所有运营人员选项（包括"全部"选项）
3. WHEN 审核人员选择特定运营人员 THEN 系统 SHALL 只显示该运营人员负责的门店检查项
4. WHEN 审核人员选择"全部" THEN 系统 SHALL 显示所有门店检查项
5. WHEN 筛选条件改变时 THEN 系统 SHALL 保持已有的审核结果不变
6. WHEN 显示检查项卡片时 THEN 系统 SHALL 在卡片上显示负责该门店的运营人员姓名
